<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Q Solve â€” Homework Helper (Mobile Optimized)</title>

<style>
  :root {
    --primary: #4f46e5; --bg: #f8fafc; --card: #fff; --text: #111827; --muted: #6b7280;
    --accent-grad: linear-gradient(90deg,#7c3aed,#4f46e5); --radius: 12px;
    --shadow: 0 6px 20px rgba(15,23,42,0.08); --font-size-base: 16px;
  }
  body.dark {
    --bg: #0f1724; --card: #111827; --text: #e6eef8; --muted: #94a3b8; --primary: #60a5fa;
  }
  html { font-size: var(--font-size-base); }
  body {
    margin:0; padding:0; font-family: Inter, "Segoe UI", Roboto, Arial, sans-serif;
    background: var(--bg); color:var(--text); -webkit-font-smoothing:antialiased;
  }
  header {
    padding:14px 18px; display:flex; gap:12px; align-items:center; justify-content:space-between;
    background:var(--card); box-shadow:var(--shadow); position:sticky; top:0; z-index:50;
  }
  .brand { display:flex; align-items:center; gap:12px; }
  .logo {
    width:44px; height:44px; border-radius:10px; background:var(--accent-grad); display:flex;
    align-items:center; justify-content:center; color:white; font-weight:700; flex-shrink: 0;
  }
  .title { font-weight:700; font-size:1rem; }
  .header-avatar {
    width: 44px; height: 44px; border-radius: 10px; object-fit: cover; border: 1px solid rgba(0,0,0,0.05);
    flex-shrink: 0;
  }
  nav { display:flex; gap:8px; align-items:center; }
  nav button { background:transparent; border:none; padding:8px 10px; border-radius:8px; cursor:pointer; color:var(--muted); }
  nav button.active { background:rgba(79,70,229,0.12); color:var(--primary); }
  .container { max-width:1100px; margin:18px auto; padding:0 14px; }
  .page { display:none; margin-top:14px; }
  .card { background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); padding:14px; margin-bottom:14px; }
  .row { display:flex; gap:12px; flex-wrap:wrap; }
  .col { flex:1; min-width:260px; }
  h1,h2,h3,h4 { margin:8px 0; color:var(--text); }
  p { color:var(--muted); line-height:1.45; }
  .muted { color:var(--muted); font-size:0.95rem; }
  input,textarea,select,button { font-size:0.95rem; }
  input,select,textarea { width:100%; box-sizing:border-box; padding:8px 10px; border-radius:8px; border:1px solid rgba(0,0,0,0.08); background:transparent; color:var(--text); }
  .btn { background:var(--primary); color:white; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; }
  .btn.secondary { background:transparent; color:var(--muted); border:1px solid rgba(0,0,0,0.06); }
  .avatar-preview { width:72px; height:72px; border-radius:50%; object-fit:cover; border:2px solid rgba(0,0,0,0.06); }
  .footer { text-align:center; font-size:0.9rem; color:var(--muted); padding:16px 0; }
  .hidden { display:none !important; }
  #toast {
    position:fixed; bottom:20px; left:50%; transform:translateX(-50%);
    background: #333; color:white; padding:10px 20px; border-radius:8px;
    z-index: 3000; visibility:hidden; opacity:0; transition: all 0.4s ease;
  }
  #toast.show { visibility:visible; opacity:1; }
  #toast.error { background-color: #d9534f; }
  .warning-box {
    background-color: rgba(255, 193, 7, 0.1);
    border: 1px solid rgba(255, 193, 7, 0.6);
    border-radius: 8px; padding: 12px; margin-top: 15px;
  }
  .warning-box p { margin: 5px 0; }
  .question-card { margin-top: 10px; padding:10px; border-radius:10px; background:rgba(255,255,255,0.6); border:1px solid rgba(0,0,0,0.03); }
  .ai-answer-container {
    margin-top: 12px; padding: 10px; border-radius: 8px;
    background-color: rgba(79,70,229,0.05); border-left: 3px solid var(--primary);
  }

  /* Media Query for Mobile Optimization */
  @media (max-width: 768px) {
    header {
      flex-wrap: wrap; /* Allow header items to wrap onto the next line */
      gap: 16px;
    }

    nav {
      width: 100%;
      order: 3; /* Make nav appear last in the header flow */
      overflow-x: auto; /* Allow nav to be scrolled horizontally */
      padding-bottom: 5px; /* Add some space for the scrollbar */
    }
    
    .brand {
        width: 100%;
    }

    .btn[data-action="share"] {
      display: none; /* Hide share button on mobile to save space */
    }

    .row {
      flex-direction: column; /* Stack columns vertically */
      gap: 0;
    }

    .container {
      margin: 12px auto;
      padding: 0 10px;
    }

    h2 {
      font-size: 1.5rem; /* Adjust heading sizes for mobile */
    }

    .btn, input, select, textarea {
        padding-top: 12px; /* Increase padding for easier tapping */
        padding-bottom: 12px;
    }

    #toast {
        bottom: 80px; /* Position toast above mobile OS navigation */
        width: 90%;
        box-sizing: border-box;
    }
  }
</style>

<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

<header>
  <div class="brand">
    <div id="headerLogo" class="logo">QS</div>
    <img id="headerPfp" alt="avatar" class="header-avatar hidden">
    <div>
      <div class="title">Q Solve â€” Homework Helper</div>
      <div class="muted" id="greetingSmall">Welcome</div>
    </div>
  </div>
  <nav id="mainNav">
    <button class="nav-btn" data-action="navigate" data-page="homePage">Home</button>
    <button class="nav-btn" data-action="navigate" data-page="solvePage">Solve</button>
    <button class="nav-btn" data-action="navigate" data-page="historyPage">History</button>
    <button class="nav-btn" data-action="navigate" data-page="settingsPage">Settings</button>
  </nav>
  <button class="btn small" data-action="share">Share</button>
</header>

<div class="container">
  <div id="welcomeScreen" class="page card"></div>
  <div id="homePage" class="page"></div>
  <div id="solvePage" class="page"></div>
  <div id="historyPage" class="page"></div>
  <div id="settingsPage" class="page"></div>
  <div class="footer card">Q Solve. Local data stored on this device.</div>
</div>

<div id="toast"></div>

<script type="module">
import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

/* -------------------------------------------
  App State and Core Functions
------------------------------------------- */
// Default API Key constant
const DEFAULT_API_KEY = 'AIzaSyDFkqehdCYrwxkwR8TSicSLHZrMnAJ3XXY';

const App = {
  pages: ['welcomeScreen', 'homePage','solvePage','historyPage','settingsPage'],
  dataKey: 'qsolve_data_v3',
  userKey: 'qsolve_user_v3',
  history: [],
  // Added 'useDefaultKey' to settings
  settings: { name: 'Student', avatar:'', theme:'default', fontSize:16, apiKey: '', useDefaultKey: true },
};

function saveAll() {
  localStorage.setItem(App.dataKey, JSON.stringify(App.history));
  localStorage.setItem(App.userKey, JSON.stringify(App.settings));
}

function loadAll() {
  const h = localStorage.getItem(App.dataKey);
  const u = localStorage.getItem(App.userKey);
  App.history = h ? JSON.parse(h) : [];
  App.settings = u ? Object.assign(App.settings, JSON.parse(u)) : App.settings;
  applyTheme();
}

function showPage(id) {
  App.pages.forEach(p => {
    const el = document.getElementById(p);
    if(el) el.style.display='none';
  });
  const page = document.getElementById(id);
  if(!page) return;
  
  // FIX: Always render from template to prevent blank pages on reset
  const template = document.getElementById(id + "Template");
  if (template) {
    page.innerHTML = template.innerHTML;
  }
  page.style.display='block';

  document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
  const activeBtn = document.querySelector(`.nav-btn[data-page="${id}"]`);
  if (activeBtn) activeBtn.classList.add('active');

  updateHeaderUI();
  if (id === 'settingsPage') updateSettingsPageUI();
  if (id === 'historyPage') refreshHistoryList();
  if (id === 'homePage') refreshHomePage();
}

function applyTheme() {
  document.documentElement.style.fontSize = App.settings.fontSize + 'px';
  document.body.classList.toggle('dark', App.settings.theme === 'dark');
}

function showToast(message, type = 'info') {
    const toast = document.getElementById('toast');
    toast.textContent = message;
    toast.className = 'show';
    if (type === 'error') toast.classList.add('error');
    setTimeout(() => toast.className = toast.className.replace('show', ''), 3000);
}

function escapeHtml(s) {
  if(!s) return '';
  const el = document.createElement('div');
  el.innerText = s;
  return el.innerHTML;
}

/* -------------------------------------------
  AI and OCR Functions
------------------------------------------- */
async function solveWithGemini(prompt) {
  // UPDATED: Logic to choose between default and custom key
  const apiKey = App.settings.useDefaultKey ? DEFAULT_API_KEY : App.settings.apiKey;

  if (!apiKey) {
    showToast('API Key is not set. Please choose the default or add your own in Settings.', 'error');
    return "Error: API Key is required.";
  }
  try {
    const genAI = new GoogleGenerativeAI(apiKey);
    const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });
    const result = await model.generateContent(prompt);
    return (await result.response).text();
  } catch (error) {
    console.error("Gemini API Error:", error);
    showToast(`AI Error: ${error.message}. Check console.`, 'error');
    return `AI Error: Could not get a response. Is your key and model name correct?`;
  }
}

async function runOcr(source) {
  const container = document.getElementById('detectedQuestions');
  if (!container) return;
  container.innerHTML = `<p class="muted">Recognizing text... please wait.</p>`;
  try {
    const { data: { text } } = await Tesseract.recognize(source, 'eng');
    const questionRegex = /(?=\n\s*\d+[.)])/;
    let questions = text.split(questionRegex).map(s => s.trim()).filter(Boolean);

    if (questions.length <= 1 && text.includes('\n\n')) {
        questions = text.split(/\n\s*\n+/).map(s => s.trim()).filter(Boolean);
    }
    renderDetectedQuestions(questions, text);
  } catch (err) {
    container.innerHTML = `<p class="muted" style="color:red">OCR Error: ${err.message}</p>`;
  }
}

/* -------------------------------------------
  UI Rendering and Update Functions
------------------------------------------- */
function updateHeaderUI() {
    document.getElementById('greetingSmall').innerText = App.settings.name ? `Hi, ${App.settings.name}` : 'Welcome';
    
    const headerPfp = document.getElementById('headerPfp');
    const headerLogo = document.getElementById('headerLogo');
    if (App.settings.avatar) {
        headerPfp.src = App.settings.avatar;
        headerPfp.classList.remove('hidden');
        headerLogo.classList.add('hidden');
    } else {
        headerPfp.classList.add('hidden');
        headerLogo.classList.remove('hidden');
    }
}

function updateSettingsPageUI() {
    // UPDATED: This function now handles the new radio buttons
    document.getElementById('userName').value = App.settings.name || '';
    document.getElementById('avatarPreview').src = App.settings.avatar || 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';
    document.getElementById('themeSelect').value = App.settings.theme;
    document.getElementById('fontSizeRange').value = App.settings.fontSize;
    
    // Set API key input and radio buttons
    document.getElementById('apiKeyInput').value = App.settings.apiKey || '';
    const useCustom = !App.settings.useDefaultKey;
    document.getElementById('settingsUseDefault').checked = !useCustom;
    document.getElementById('settingsUseCustom').checked = useCustom;
    document.getElementById('settingsCustomApiKeyContainer').style.display = useCustom ? 'block' : 'none';
}

function refreshHomePage() {
    const userNameDisplay = document.getElementById('userNameDisplay');
    if(userNameDisplay) userNameDisplay.textContent = App.settings.name || 'Student';

    const recentList = document.getElementById('recentList');
    if (recentList) {
        recentList.innerHTML = '';
        if (App.history.length === 0) {
            recentList.innerHTML = `<p class="muted">Your recently saved questions will appear here.</p>`;
            return;
        }
        App.history.slice(0, 3).forEach(item => {
            recentList.innerHTML += `<div class="question-card">${escapeHtml(item.question.slice(0, 80))}...</div>`;
        });
    }
}

function renderDetectedQuestions(questions, fullText) {
    const container = document.getElementById('detectedQuestions');
    container.innerHTML = '<h3>Detected Questions</h3>';
    if (questions.length === 0 && fullText) {
        questions = [fullText];
    }
    questions.forEach((qText) => {
        const questionHtml = escapeHtml(qText);
        container.innerHTML += `
        <div class="question-card">
            <p class="question-text">${questionHtml}</p>
            <div class="ai-answer-container" style="display: none;"></div>
            <div class="button-container" style="margin-top:10px;">
              <button class="btn" data-action="solve-question">Find Answer with AI</button>
            </div>
        </div>`;
    });
}

function refreshHistoryList() {
    const historyList = document.getElementById('historyList');
    if (!historyList) return;
    historyList.innerHTML = '';
    const searchTerm = (document.getElementById('historySearch')?.value || '').toLowerCase();
    
    const filteredHistory = App.history.filter(item => {
        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = item.answer;
        const answerText = (tempDiv.textContent || tempDiv.innerText || "").toLowerCase();
        const questionText = (item.question || "").toLowerCase();
        return questionText.includes(searchTerm) || answerText.includes(searchTerm);
    });

    if (filteredHistory.length === 0) {
        historyList.innerHTML = `<p class="muted">No questions saved yet.</p>`;
        return;
    }
    filteredHistory.forEach(item => {
        historyList.innerHTML += `<div class="question-card">
            <h4>Question:</h4>
            <p>${escapeHtml(item.question)}</p>
            <h4 style="margin-top:12px;">Saved Answer:</h4>
            <div class="ai-answer-container" style="display:block;">${item.answer}</div>
        </div>`;
    });
    if (window.MathJax) MathJax.typesetPromise && MathJax.typesetPromise();
}

function handleAvatarUpload(event) {
    const file = event.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = (e) => {
        App.settings.avatar = e.target.result;
        saveAll();
        updateHeaderUI();
        updateSettingsPageUI();
    };
    reader.readAsDataURL(file);
}

/* -------------------------------------------
  Initialization and Event Handling
------------------------------------------- */
function init() {
  loadAll();
  
  document.body.addEventListener('click', async (e) => {
    const target = e.target.closest('[data-action]');
    if (!target) return;
    const action = target.dataset.action;
    
    if (action === 'navigate') showPage(target.dataset.page);
    
    if (action === 'accept-welcome') {
      // UPDATED: Logic to save the user's API key choice
      App.settings.name = document.getElementById('setupName').value.trim() || 'Student';
      const useDefault = document.getElementById('setupUseDefault').checked;
      App.settings.useDefaultKey = useDefault;
      if (!useDefault) {
          App.settings.apiKey = document.getElementById('setupApiKey').value.trim();
      } else {
          App.settings.apiKey = ''; // Clear custom key if default is chosen
      }
      saveAll();
      localStorage.setItem('qsolve_first_time_v3', 'true');
      showPage('homePage');
    }

    if (action === 'run-ocr') {
        const file = document.getElementById('ocrFile')?.files[0];
        const text = document.getElementById('pasteText')?.value.trim();
        if (file) runOcr(file);
        else if (text) renderDetectedQuestions(text.split(/\n\s*\n+/), text);
        else showToast('Please select a file or paste text.', 'error');
    }
    
    if (action === 'solve-question') {
        const card = target.closest('.question-card');
        if (!card) return;
        
        const questionText = card.querySelector('.question-text').innerText;
        const answerContainer = card.querySelector('.ai-answer-container');
        const buttonContainer = card.querySelector('.button-container');
        
        target.textContent = 'Thinking...';
        target.disabled = true;
        
        const aiResponse = await solveWithGemini("Please provide a clear and comprehensive answer to the following question. Use markdown and LaTeX for formatting where appropriate:\n\n" + questionText);
        
        let formattedResponse = escapeHtml(aiResponse)
            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
            .replace(/\*(.*?)\*/g, '<em>$1</em>')
            .replace(/\n/g, '<br>');

        answerContainer.innerHTML = formattedResponse;
        answerContainer.style.display = 'block';

        if (window.MathJax) MathJax.typesetPromise && MathJax.typesetPromise([answerContainer]);

        buttonContainer.innerHTML = `<button class="btn small secondary" data-action="save-ai-answer">Save to History</button>`;
    }
    
    if (action === 'save-ai-answer') {
        const card = target.closest('.question-card');
        if (!card) return;

        const questionText = card.querySelector('.question-text').innerText;
        const answerHtml = card.querySelector('.ai-answer-container').innerHTML;

        const historyItem = {
            id: 'q-' + Date.now(),
            question: questionText,
            answer: answerHtml,
            createdAt: new Date().toISOString()
        };

        App.history.unshift(historyItem);
        saveAll();
        
        target.textContent = 'Saved âœ“';
        target.disabled = true;
        showToast('Answer saved to history!');
    }
    
    if (action === 'save-settings') {
      // UPDATED: Logic to save the user's API key choice
      App.settings.name = document.getElementById('userName').value.trim();
      const useDefault = document.getElementById('settingsUseDefault').checked;
      App.settings.useDefaultKey = useDefault;
       if (!useDefault) {
          App.settings.apiKey = document.getElementById('apiKeyInput').value.trim();
      } else {
          App.settings.apiKey = ''; // Clear custom key if default is chosen
      }
      saveAll();
      updateHeaderUI();
      showToast("Settings saved!");
    }
    
    if (action === 'reset-app') {
        if (confirm('This will permanently delete all your data. Are you sure?')) {
            localStorage.clear();
            
            App.history = [];
            // Reset settings to include the new 'useDefaultKey'
            App.settings = { name: 'Student', avatar:'', theme:'default', fontSize:16, apiKey: '', useDefaultKey: true };
            
            applyTheme();
            updateHeaderUI(); 
            
            showPage('welcomeScreen');
            showToast('App has been reset.');
        }
    }

    if (action === 'share') {
        if (navigator.share) {
            navigator.share({ title: 'Q Solve', text: 'Check out this homework helper!', url: window.location.href });
        } else {
            showToast('Web Share not supported on this browser.');
        }
    }
  });
  
  document.body.addEventListener('change', e => {
    const target = e.target;
    if (target.id === 'avatarUpload') handleAvatarUpload(e);
    if (target.id === 'themeSelect') {
        App.settings.theme = target.value;
        applyTheme();
        saveAll();
    }
    
    // ADDED: Event handler to show/hide the custom API key input field
    if (target.name === 'apiKeyChoiceSetup' || target.name === 'apiKeyChoiceSettings') {
        const isSetup = target.name === 'apiKeyChoiceSetup';
        const containerId = isSetup ? 'setupCustomApiKeyContainer' : 'settingsCustomApiKeyContainer';
        const container = document.getElementById(containerId);
        if (container) {
            container.style.display = target.value === 'custom' ? 'block' : 'none';
        }
    }
  });

  document.body.addEventListener('input', e => {
      if (e.target.id === 'fontSizeRange') {
        App.settings.fontSize = e.target.value;
        document.documentElement.style.fontSize = App.settings.fontSize + 'px';
        saveAll();
      }
      if (e.target.id === 'historySearch') {
        refreshHistoryList();
      }
  });

  const firstTime = localStorage.getItem('qsolve_first_time_v3') !== 'true';
  showPage(firstTime ? 'welcomeScreen' : 'homePage');
}

init();
</script>

<template id="welcomeScreenTemplate">
  <h2>Welcome to Q Solve</h2>
  <p class="muted">Your personal homework helper. To get started, please set your name and choose an API key option.</p>
  <div style="margin-top:20px;">
    <label>Your Name</label>
    <input id="setupName" placeholder="e.g., Alex" />
  </div>
  
  <div class="warning-box">
    <p><strong>AI Features</strong></p>
    <div id="setupApiKeyOptions" style="margin-top:8px;">
        <input type="radio" id="setupUseDefault" name="apiKeyChoiceSetup" value="default" checked>
        <label for="setupUseDefault" class="muted">Use the default shared API key</label>
        <br>
        <input type="radio" id="setupUseCustom" name="apiKeyChoiceSetup" value="custom" style="margin-top:5px;">
        <label for="setupUseCustom" class="muted">Use my own Gemini API key</label>
    </div>
    <div id="setupCustomApiKeyContainer" style="display:none; margin-top:10px;">
        <p class="muted" style="margin-bottom:5px;">Get a free key from <a href="https://aistudio.google.com/" target="_blank" rel="noopener">aistudio.google.com</a>.</p>
        <input type="password" id="setupApiKey" placeholder="Paste your key here">
    </div>
  </div>

  <button class="btn" data-action="accept-welcome" style="margin-top:15px;">Start Solving</button>
</template>

<template id="homePageTemplate">
  <div class="card">
    <h2>Hello, <span id="userNameDisplay">Student</span> ðŸ‘‹</h2>
    <p class="muted">Ready to solve some problems? Get started below.</p>
    <div style="display:flex; gap:8px; margin-top:8px;">
      <button class="btn" data-action="navigate" data-page="solvePage">Solve a New Question</button>
      <button class="btn secondary" data-action="navigate" data-page="historyPage">View History</button>
    </div>
  </div>
  <div class="card">
    <h3>Recent Questions</h3>
    <div id="recentList"></div>
  </div>
</template>

<template id="solvePageTemplate">
  <div class="card">
    <h2>Solve a Question</h2>
    <p class="muted">Upload an image of a worksheet or paste text directly to begin.</p>
    <input type="file" id="ocrFile" accept="image/*,application/pdf">
    <textarea id="pasteText" rows="4" placeholder="Or paste question text here..." style="margin-top:8px;"></textarea>
    <button class="btn" data-action="run-ocr" style="margin-top:8px;">Extract Questions</button>
    <div id="detectedQuestions" style="margin-top:12px;"></div>
  </div>
</template>

<template id="historyPageTemplate">
  <div class="card">
      <h2>Question History</h2>
      <p class="muted">All your saved questions and their AI-generated answers.</p>
      <input type="search" id="historySearch" placeholder="Search in questions and answers..." style="margin-bottom:10px;">
      <div id="historyList" style="margin-top:12px;"></div>
  </div>
</template>

<template id="settingsPageTemplate">
  <div class="row">
    <div class="col card">
      <h2>Profile</h2>
      <div style="display:flex; gap:12px; align-items:center;">
        <img src="" alt="avatar" id="avatarPreview" class="avatar-preview">
        <div style="flex:1;">
          <input type="text" id="userName" placeholder="Your name">
          <input type="file" id="avatarUpload" accept="image/*" style="margin-top:8px;">
        </div>
      </div>
    </div>
    <div class="col card">
      <h2>AI Settings</h2>
      <div id="settingsApiKeyOptions">
          <input type="radio" id="settingsUseDefault" name="apiKeyChoiceSettings" value="default">
          <label for="settingsUseDefault">Use the default shared API key</label>
          <br>
          <input type="radio" id="settingsUseCustom" name="apiKeyChoiceSettings" value="custom" style="margin-top:5px;">
          <label for="settingsUseCustom">Use my own Gemini API key</label>
      </div>
      <div id="settingsCustomApiKeyContainer" style="display:none; margin-top:10px;">
          <p class="muted" style="margin-bottom:5px;">Get a free key from <a href="https://aistudio.google.com/" target="_blank" rel="noopener">aistudio.google.com</a>.</p>
          <input type="password" id="apiKeyInput" placeholder="Paste your key here">
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col card">
      <h2>Preferences</h2>
      <label>Theme</label>
      <select id="themeSelect">
        <option value="default">Purple (Default)</option>
        <option value="dark">Dark</option>
      </select>
      <label style="margin-top:8px;">Font size</label>
      <input id="fontSizeRange" type="range" min="12" max="20" step="1">
    </div>
    <div class="col card">
      <h2>Danger Zone</h2>
      <p class="muted">This will permanently delete all your saved data.</p>
      <button class="btn small" data-action="reset-app" style="background:#ef4444;">Reset App</button>
    </div>
  </div>
  <div class="card" style="text-align:center;">
      <button class="btn" data-action="save-settings">Save All Settings</button>
  </div>
</template>

</body>
</html>
